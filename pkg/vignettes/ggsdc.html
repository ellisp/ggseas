<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Peter Ellis" />

<meta name="date" content="2016-10-10" />

<title>ggsdc - seasonal decomposition on the fly</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">ggsdc - seasonal decomposition on the fly</h1>
<h4 class="author"><em>Peter Ellis</em></h4>
<h4 class="date"><em>2016-10-10</em></h4>



<div id="seasonal-decomposition-on-the-fly" class="section level2">
<h2>Seasonal decomposition on the fly</h2>
<p>The <code>ggsdc</code> R package aims to help exploratory analysis of time series by making it easy to do seasonal adjustment and decomposition on the fly in the <code>ggplot2</code> universe. It provides two main sets of functionality:</p>
<ul>
<li>a collection of <code>ggplot2</code> <code>stats</code> oriented to time-series, allowing indexing, rolling averages and seasonal decomposition to be added as straight-forward statistical transforms with familiar <code>geoms</code> like <code>geom_line</code> and <code>geom_point</code>.</li>
<li>the <code>ggsdc()</code> function which provides decomposition similar to that from <code>decompose</code>, <code>stl</code> or the X13-SEATS-ARIMA world via the <code>seasonal</code> package, except in <code>ggplot2</code> terms so you can use familiar themes, titles, control your <code>geoms</code> and <code>scales</code>, etc. - and have multiple time series decomposed on a single graphic.</li>
</ul>
</div>
<div id="using-stats-for-simple-time-series-graphic-composition" class="section level2">
<h2>Using stats for simple time series graphic composition</h2>
<p><code>ggseas</code> provides five <code>stats</code> that have <code>geom_line</code> as their default geom and will easily integrate into a time series exploration:</p>
<ul>
<li><code>stat_index</code></li>
<li><code>stat_decomp</code></li>
<li><code>stat_rollapplyr</code></li>
<li><code>stat_stl</code></li>
<li><code>stat_seas</code></li>
</ul>
<p>Like everything in the <code>ggplot2</code> universe, these need your data to be in a <code>data.frame</code> (or its modern cousin the <code>tibble</code>). Much time series analysis in R uses <code>ts</code> and <code>mts</code> objects rather than <code>data.frames</code> so a first step to use <code>ggplot2</code> for time series is to convert your data into a <code>data.frame</code>. The very simple <code>tsdf</code> function is provided to make this easier (there must be someone who’s done this earlier and better than me, if so let me know). It extracts the information on time from a <code>ts</code> or <code>mts</code> object and makes it a column, with time series data columns to the right of it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggseas)</code></pre></div>
<pre><code>Loading required package: seasonal</code></pre>
<pre><code>Loading required package: zoo</code></pre>
<pre><code>
Attaching package: 'zoo'</code></pre>
<pre><code>The following objects are masked from 'package:base':

    as.Date, as.Date.numeric</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ap_df &lt;-<span class="st"> </span><span class="kw">tsdf</span>(AirPassengers)
<span class="kw">head</span>(ap_df)</code></pre></div>
<pre><code>         x   y
1 1949.000 112
2 1949.083 118
3 1949.167 132
4 1949.250 129
5 1949.333 121
6 1949.417 135</code></pre>
<p>This means we can draw our time series in the usual <code>ggplot2</code> way:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) +<span class="st"> </span>
<span class="st">   </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey75&quot;</span>) </code></pre></div>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
<div id="convert-your-data-to-an-index-with-stat_index" class="section level3">
<h3>Convert your data to an index with <code>stat_index()</code></h3>
<p>One thing we often want to do with time series data is turn it into an index with some arbitrarily chosen point as a reference, often set to equal 100. The <code>stat_index()</code> <code>stat</code> does this for you. In the case below, the average value of the first 10 points of the data is chosen as the reference to equal the default of 100.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) +<span class="st"> </span>
<span class="st">   </span><span class="kw">stat_index</span>(<span class="dt">index.ref =</span> <span class="dv">1</span>:<span class="dv">10</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArMAAAEgCAMAAACQIwtZAAAArlBMVEUAAAAAADoAAGYAOpAAZrYzMzM6ADo6AGY6kNtNTU1NTW5NTY5NbqtNjshmAABmtv9uTU1uTW5uTY5ubo5ubqtuq8huq+SOTU2OTW6OTY6Obk2ObquOyP+QOgCQtpCQ2/+rbk2rbm6rbo6rjk2ryKur5OSr5P+2ZgC2/7a2///Ijk3I///bkDrb///kq27k///r6+v/tmb/yI7/25D/5Kv//7b//8j//9v//+T///8qqHpqAAAACXBIWXMAAA7DAAAOwwHHb6hkAAARLElEQVR4nO2diZrbthVGkcVtZI8dx3Vlu1WaSZdxYzkaeSorwvu/WLlAEhcsFyAI4FL//+UzJS5HN+IRRIEgR0gE4RWRuwAE8QycRbgFziLcAmcRboGzCLfAWYRbwp3dR0xUWHo+yk/Ch7N88ChfceAsGzzKVxw4ywaP8hUHzrLBo3zFgbNs8ChfceAsGzzKVxw4ywaP8hUHzrLBo3zFgbNs8ChfceAsGzzKVxw4ywa/1PKFLwfOssEvtXzhKS2c5YNfavlwNiMf5QfxhefRAZzlg19q+cLzkBbO8sEvtHyxh7P5+Cg/hC8u/1A5cJYNfqHlw9mcfJQfwoezOfkoP4QPZ3PyUX4IH87m5KP8ED6czclH+SF80fmXxoGzbPALLR/O5uSj/AC+6E1InMnOIsiUiN4kYMuARPgAXj9BMWHp+Sg/gJ+jnY3wP3OtJiYsPR/lB/DhbFY+yg/gw9msfJQfwIezWfkoP4APZ7PyUX4AH85m5aP8AL4YTAkcOMsGv8jyxeiBmwNn2eAXWT6czctH+f58OJuXj/Iv0RkIZwvko/xztLfZgLMF8lG+iv4uG3C2QD7Kb2O4yQacLZCP8puYbrIBZwvko/wmcJYRH+U3MV2UqOML7UN74CwfPJfy4SwjPsqvY7wmEc4WyEf5deBs1PDY6bn4cDYk2Ok5+XA2JNjpOfmLc/Z0v5Hy+G5193iZwNm0eCbll+PsbrVpvN29PE/gbGI8k/J9nBWGx9ZQnT385W8befywlYc3WzWBs4nxTMovxdnTr/+pGtfD20d5fP+gJtXsZ1VcDTRyWxGDKWll+hb09Xfr+oDg6a6RVU3UIt+PofUTFBOWno/y97ZrEh3tLLmhpTlbtawnXTsLZ1PieZRfirO7VZ01jmez4nmUX4qzsu3rOt2v236DNfoNMuB5lO/jrLA8M8fLWfTPZsXzKL8gZ43x/F+yVxMTlp6/4PLpI7LhbNzA2UC8x5+rh7NxA2cD8XRnLdfKuJylSgtn+eDzla+/9tuw6vCBhQ9ns/OXWr7h2m/TuqNHRj6czc5favlzOTtcA86m5y+0fNM1ieaVB49MfDibn7/Q8pM5S3wROMsHD2cVB86ywWcq3zge1rK2dgs4WyB/meV7OWu7VgbOFshfZvmzOTtGwtnk/GWWn9BZ2qvAWT54OKs4cJYNnpmzo03gbIH8RZYvehNXPJzVEeFsaj6b8gX9b3RYxhba1tZt0edreXA2NZ9J+cIwfiCCs9bruwjOkl4FzvLBR3N2X4CzBhycTcxnUn4JzppocDYxn0f5xn4AOBsSHjs9Fz6Ls5brDmxr6zYpx1mEWUTnX+ra1A2E5RlpiY+HaGfLx5ffztqvlZHGJeZtdIGzfPBx+OZzBHA2JCx2ejY8nFUcOMsGH9VZjRzpnLWw4GxaPovy/Zy1jdOyrq15DmcL5LMof0ZnHdcdwNkC+RzKt3zXw9mQcNjp+fCLcdZKcr8MnOWDvyVnbavAWT54OKs4cJYNPgbf5mB8Z/tz4GyBfAblezorDI9dbO0saV5vuIl1FTjLBw9nFQfOssHDWcWBs2zwmZ11Suty1nw2Y7QWnE3FZ1D+jM7qFvfaafPonOE29lXgLB+8kU8ZvqJZc7jZDM52Zoq9dHcJqOVwNhk/m7NkaWd0Vr8UzhbOz1S+oFubz9nqgXQfqqoV4Gwyfj5nqccHns4Ky7PhfLuzouELC6WziWMVOMsHX6yzFhXhbOH8W3XW9nXe6SyQBB/3cDYtP0/5xC6k8Uq+zlraUvPxdOfAgeis8+Cc6OzTavViK+Xx3eru8TKBs2nx0521OxjorL2ZD3HWsZzm7OHNVu5eytP9pjOBs4nxJTvreMmzsyFVjkJsZ1tvjx+2nQmcTYyHs23ozlYt6+Htozy+f1CTat6zKs4NkVkjBlPKusRNhsv16zsogvBCYXFRD6+fP8inu0ZWNVFLCB8cctDO+vPF6IE5nu3siOg4PWt8TaHnB4bqrOw0sNd2Fs6mxMPZNnRn5acNjmez4qM7O3ge5ixh+EAWZ9XRwOl+3fYbrNFvkAHvuGCL0ltvnTGPs9cTDonb2d1qVR3Pon82Kz6/s7rXoJ+LzXBsYEikQtpqYsLS8+Gs/lXhbLn8vM6SvqVtMzg7+/XVN7/A2fLwqZ2lCVqGs1J+FOK73+FsYfgZLoztzZnJ2csacx8bfH0lxA9wNg/epEF+Z4ldtvpV5j+era399jc4mwFvGow30VlXIykHM7k5+1mI76tjBMIRQqRC2mpiwtLzMztLOSNlm3VxVoyX6TYQhNfU8adG6+wfPwvxY/3gC6GhjVRIW01MWHp+JLwwmRDorKXdnOasMK2lz7z9BpRjAjg7Fz66s8K4WOes6J5vtWwgLKtpg/7ZAvnxnNWr4BrgamxnG6Kz3bw6uzdfT9A7h2H8dGkDZwvkF+us2cFwZ+2r6QJnC+RHdFYrQ9iFBNafSgZnzS72nPW4g80ezhbJj4M3/wKa4Kz9xbp4YueDqhLOwtn9xQqNDeU5i2MDOFsnqbPd31SWLq7RBj6ungNnC+Qnd3a4zgRnhSDaCGcH1cSEpednd5Z2utX0arT7FsLZQTUxYen5UZ3VaJHCWaeMvmdsr4GzBfKj4MXogZkfwdmOg5J0jgDODqqJCUvPL9JZ0nc9nA2vJiYsPZ+9s6QTW34nbDspx1kkboTmkXNVyyzKDY4u6wiCB6IUW9DOloIXmkcGPqlVpbSz4oIntKALaGcjFdJWExOWnh8DL7QPtXzdiVN/Z68Okp0NUxbOlshP5Ww72Jp4AsHPWULgbL+amLD0/MjOjty4XrAlTINTxOgJwVnRxzs3gLPdamLC0vMTOUsc9CKIFxL4O0tcbxg4WyC/KGdVI0s5QIWzU6qJCUvPj4Aff7eP+SRnz8MCaB0BXfxsgbMF8mM7OxTO31nSsSecnVRNTFh6vgnv8WVKcJYyfsB2Ns0YLu8+nE2A9/ihHd1Zj3B59+Hs/HiPE0fC+hTOthw4Ozue1ON0XdX8HM62HDg7O95j9B7BWdJgwaxjBefmw9n58XA2Lh/Ozo4XvYk9cJbCgbNz4z2cdYxwoY4fgLNwdho+lrNCSFoPROjAKy7vPpydHR/JWVHzjeO5+tvAWTg7Be9zRsrirNjPPiiby7sPZ+fGezirW6M7fmDmQdlc3n04GxidFoU4GzpYkMu7D2fDoj2utDvrPIGlZXaPhuFsy4GzIdH/gNfhhfbhaC3zj6vOudjyh1Im4ROdPbxerTb4u+LnGLpAQ521dgbA2RGH5Ozx/YM8/PRwut/I3UupJrfrrKlvP9hZ54vB2S6H5OxTbeinzfHDVh7ebNUEzlLwwvDYPXv8YnC25dCODdq29vD2sTOp5j2r4txwcRG9CWld6xYOkHCvcptxvimn+7V8umtkVRO1INKHp/0ExYTNxjee2NLgx+MFHOvoF6Od7XKIzh7fratfYsN29iadFYOpFW+9VsY6t7cYznY5NGcPrze1uDie3fs5a79WxjKzv1yY+FHD4t3fU51tlW2OD5p+g/UN9xtYzhHM4+ze+0YvgeHw7jcckrO7VZ0N+mf305y1np21vCKc7XFoxwaWRCqkrSYmbB6+rb91hB+tofGTMgwBzvY4cLYN9Rx9TGdp1x1cT5PB2ZYDZ5tQb5th7btyOzs4xUC8DAbO9jlwto79opWr0PauqyHefiQgnK873AjOthw4W8fh7GWcIM1Zc2/Y6NAiyx/mzoOHs1H5ju/oi12OboCLsxYdh002nPXnwFnnb6FLs+nqBri2s8J4fYulDXYGzrYcOOts8dw29/HWjwCcnc6Bs06LXEcNQzxhbGGQsnBWceAsnE2Dh7PR+JZzsdbZmoVwNgn/5p21ndeyztYsJDlLPZGgCZxtOXBW99CwhmOhdK+/h7PTOTfurDA8ds/WLKU5u8/+xzfz4OFsJL51/IB5pn4xnE3Ch7OmJ9aZ+sVwNgkfzpqfmecZlhOdDVUWzirObTsrrE+N87TL1Tgaj3FavoGzLQfO2p6TvunbSTWV4V0CpMDZlrNIZ4Xhnm1zONs5SQBnk/AX6uzlHwffNlJLCJP6pheTxDHcoYGzLWeyswVGdP61rKBb5TJHkN8R0dlOLOydLDqLameNgwsvJ1fNww/9xwpeDwik53UHvkE723IW6OzwUoARn+Csj3oCzibl36Kz14bR3Lfl56y44uHs7PwFOmsZ9SIvM81dqdRO1u4WHWfnDJxtOTfqrLE7LGTc1XltLjs9Dx7OGmMbQUD68vbvr4KzSfnLcLbXq2pYoPikU6tljmGBs4qzDGfF8MFlyYBPsTH4tz+XnZ4HD2e7sfRdDZyl2Qhni+bzcNZxElVYfu33LkSYsyNqz2en58HfmrOXf4yLTb+crjMrY7HTM+Jvy1nHuSlltGFx92QsdnpGPJwdLbYvPQ+8mjVcdnoe/E05az4Xa5k7XA5nc+Nv09mgiwy7B8PY6Rnxt+Ss5VyseeZwBTibHX+jztoGvJpz7VLATs+IvyFnbedi97Q+V/yxohLwzJ0lX2O4H2o62Ip2lgB/rKgEPG9njZ1Tvs5Sz2vB2QLwS3DWfL2WZl3dU/9TsdjpGfGsnTVfJijHS8wDtQIGD2CnZ8RzdtZinTzPN59GcJxgsAc7PSM+vbOHN1sZ5++Ku659aTunnKML4SwzfHJnn1YvtvJ0v5G7l+dJoLOua1/6P9GMzgYNK8ROz4hP7eyn5/+u2tnjh23d3qqJh7PCdDygc7bbkJrPIcBZbvg8xwaHt4/y+P5BTaqZz6q4NmzhQuhvSKR5XdF5oCtL9FZCbjYkZ5/uGlnVRC0gfDA6X/Ou67Us1yP2Ngm74gANVUZ8Ie0szdnOBYaOC7ak81TteS6cZYfP42zY8ax9XNbAWdJ1scFXGWKnZ8TncfZ0v277DdY+/QYOv7qLac4WewMCLjs9D55P/6z7BOu5I6CaUq/lLvRibi47PQ+ey3kw2khB9S/lptrdTfyDnZ4Rz8RZYrN5+YfLu5YHj/IVZ952lpRk175gp+fEL8rZZNcRYKfnxMPZoGCnZ8Qvy9lU1xFgp+fEL8zZSzUxYen5KD8JH87ywaN8xYGzbPAoX3HgLBs8ylccOMsGj/IVB86ywaN8xYGzbPAoX3HgLBs8ylccOMsGj/IVZ7KznEK54LLgoPxe4CyDoPxe4CyDoPxe4CyDoPxebsNZZEmBswi3wFmEW+Aswi1wFuGWBTvb3E3k8Lq+ga7crVb1tHq22uSuixhN+af71fMH95ZFpFu+qrt3S5cJWa6zzd2ej+82cle9UZ8aU+sb5B1+4rHXNeXXk6coe33+DMuv6u7fcntCFutse7dndSvH06+NqE/1O/aJRUOrK7++xx+T9MpXdfdvUTghi3W2dxfS6lvpfFBwvRlp4RmXf3j7L17HBpd7wDZ1928FOyELd7b5dnr+UB8QtI1VfW9HHhmXf3i9aXY8i3TLb+vu33J7QhbubP0r4K/tN2tzUHB8x0VZTfnRGqoU6ZSvveX2hCzdWXk9DKycrT/xXDIu//h3bs7KpnxVN45n3Wm+napdXP1Wrb+WTv/cclJWU37zqWN1bNCWr+ru33J7QhburHxaNX2Cu1X9K6Du5mTTQTsuv+7gfMGl66Bbvqob/bPIrQbOItwCZxFugbMIt8BZhFvgLMItcBbhFjiLcAucRbgFziLcAmcRboGzSfP5m1/k11c/5C6Dd+Bs2nz8vv4PmRI4mzb/+9M//vxb7iKYB84mzmfxY+4SuAfOJs5HgUODiYGzafPl2/++QkM7LXA2ab5Wwn75Fge0kwJnk+bjd7/LP37G0cGkwFmEW+Aswi1wFuEWOItwC5xFuAXOItwCZxFu+T+zuAYk1nBAHQAAAABJRU5ErkJggg==" alt /><!-- --></p>
<p>You can control all that. For example, you might want the 120th point of the data to be equal to 1000</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) +<span class="st"> </span>
<span class="st">   </span><span class="kw">stat_index</span>(<span class="dt">index.ref =</span> <span class="dv">120</span>, <span class="dt">index.basis =</span> <span class="dv">1000</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
<p>Indexing also turns up later as an option in most of the other functions in <code>ggseas</code>.</p>
</div>
<div id="make-rolling-averages-easily-with-stat_rollapplyr" class="section level3">
<h3>Make rolling averages easily with <code>stat_rollapplyr()</code></h3>
<p><code>stat_rollapplyr()</code> makes it easy to add a rolling function to your data, defaulting to the mean:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) +<span class="st"> </span>
<span class="st">   </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey75&quot;</span>) +
<span class="st">   </span><span class="kw">stat_rollapplyr</span>(<span class="dt">width =</span> <span class="dv">12</span>, <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>) +
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of US Air Passengers</span><span class="ch">\n</span><span class="st">(rolling average and original)&quot;</span>)</code></pre></div>
<pre><code>Warning: Removed 11 rows containing missing values (geom_path).</code></pre>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAArMAAAEgCAMAAACQIwtZAAAAulBMVEUAAAAAADoAAGYAOpAAZrYzMzM6AAA6AGY6kNtNTU1NTW5NTY5NbqtNjshmAABmADpmAGZmtv9uTU1uTW5uTY5ubo5ubqtuq8huq+SOTU2OTW6OTY6Obk2ObquOyP+QOgCQ2/+rbk2rbm6rbo6rjk2ryKur5OSr5P+2ZgC2Zma2//+/v7/Ijk3I///bkDrb/7bb///kq27k///r6+v/tmb/trb/yI7/25D/5Kv//7b//8j//9v//+T///+Sz+rVAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAXLklEQVR4nO2dDXvbuJWFtZ3MbDSTydbpbNae2Tp1t9u4w1itLW+iKOb//1tLEhRJAPeCFxT4calzniehPsCjK+k1BAIXwCaHIF3azB0ABEUKzELaBGYhbQKzkDaBWUibwCykTemY3SdTQiuYL8I9jTmYhfl07mAW5trcwSzMtbmDWZhrcwezMNfmDmZhrs0dzMJcmzuYhbk2dzALc23uYBbm2tzBLMy1uTPmWaQLmIX5ZO4cs3HQglmYT+cOZmGuzZ1tG0RBC2ZhPp07356NgRbMwnw6d9o820/C7Mvd9sePeX682b55ag5gVr/5XMzGQDuQ2U+3+ec3Ty93t/njz3l9ALMrMF8vs8ffHk6Hwy8P9QHMrsB8vcwe3v+tbBsc3j/lx18/1ofi8e8LRRlBUJ41/8XJYvbr26uvbzd/+J0tfXh3WwJbNA9KWOtD/VySP0jz95TOCuaLcB+xnr1/le/+8PvuFc+sVcG29SyY1W6uldmimv324VX+zFe0xz9XlKI9uzrz2ZiNgJZh9uvb1yFmy36DonZ9ubs2/QbX6DdYiblWZr99eP38b38pWwisjjfbnx7QP7s+8xlCz6yDxIVgNv/yw+ZVfv/dv3hmA0ry5kxs6axgvgj3EZk9S0nenIktnRXMF+E+HrPfPlyB2Qs118pscQ1mY7jbVHoNZldvrpXZfNdtyn59e4J1tymuzMDsqs21MltQWqnq6/r6x06Pl3UHzK7QXCuz5ynJmzOxpbOC+SLcwSzMtbmHmJVDSzNbXHRd1Y3aU0Ph1FYAs6s2nz70zLvR60Ixe//dP03KAerZSzPXymyVb3AVzDcAsys1Xw2zX35A2+BCzNO5UwiO2DbYlW2DMrXL6NuH198+XHkjDWB2hebJ3Ml1NkZkNn+2hr1KWu9f58+ypJkhb5CJLZ0VzCd2p5fZGJNZWyWzu2AOOJhdi3kid2aVjemYLTNpC2B3qGfXb57GnVtlY8xrsFOPbN3bVTRo83tRsgGYVW6uldlyAmNJ7utBXbQD3iIXWzormE/qzs1KJMwz8mZQdD1b9RAUzYEhXbQD3iIXWzormE/qvgBm0T97MeZamW3aBnUibVwTYcBb5GJLZwXzSd1nYNb0z17lO3PZJR1NALP6zZO4s5O/x2TWVtz8sPi3yMaWzgrmU7ovgNm4bJn4t8jGls4K5lO6z8Gsc81lzbUBs6s218rs0MxZMKvffGpmM+Z2SBSzcddcYHZN5lqZta65zFq0aBtciHlCZgkGw8xKoaWYHTpDAczqN9fKbFy9CmbXZK6VWVdenheYXa35WpiNy/OKf4tsbOmsYD6hO79ggWeeBe6xopntrG+Qx+Z5Rb9FPrZ0VjCf0H0WZp31DcDs5ZiH3KV9UXMw680Vd/K8wOx6zQPu4h3rF8Gsk+cFXaQy6bZzmXMUFJWf0VFofYM4Cf8YJX9P6axgfrY7PfubLmkfA+ZZ8C4jkllnfQMweznmrDsz+5sp6txgzRMy2xHGbi/KfFpm3QKJmI2W8I1JYktnBfMz3bnZMmxZsvyIzDp7NGOewuWYz8us7BVIZp09mjEf7HLMtTLr7dEsXPUIzOo3Z9zZjFi2LFl+VGatPZpxDXY55lqZFezRDGZXaj4ps77f8PYs9mi+WPOJmd1s2JN5kcx62kWMMYjel0h6v3m95hMyWzIVOJmXiNkmRwbMrt08KbPeCa15xSvhN5hZp3+2zUUEs2s3p93ZiQeBwtQJJ3NTwVJ2g5ml+2fB7LrMM/E2HYGsl0BhonxtvuHNhjLr98+ibbA684xJIDib2dCKBZX5qRVLmwlegmHW6p/FNdgKzbP9LMy2112M10Bm0T97AeazMNvpKOCsBjKL/tn1m7MdASMyu9nk3FP9j3dEMnuWBG9LqOV/83rNo5jlk15Chd07G8sczMI8UpMzWzULcroUezotktmoPT/ArEbz0ZjNyHt1Q1bArOA1KGbj9mQGswrN+UGCMZhtLr3GY9bak7ldrAu5iOsxn5LZTmfBuMzuiDEFWb3b/7akWvw3r9ec7whIzayVB5PTpQIGlChm3T2ZMXa7OvMoZgODscHC+72bazgis86ezGB2deajMWt1bhXE2ieMyKwr5BuszDzwY5+I2VNy7GzMntbrArMrMR+b2bZJQDMbtOl9DYLZ+6E9s2BWi/m4zHYbsUOZDZXwmS3zDHZnQNv3ruRa+jev13xUZjfOfcI8MbPVojHOyjFR42J970qupX/zas1DEJ7LrDvHyzpjJGarToKy46BV3L6Mfe9KroV/83rN45gNJRd6Zb1ZiRSzYRcuS7J1ETCLtY9WZj4Ws70TaadjFmvMrcx8FGaZmbQzMRu3L2Mwnigt/JvXaz6cWRamDTcvkTo7PbNeTgzW61qZeXJmA9MSrVo6C3hYp8Qxe7Z6AorQwr/5pZkLEliIku5ZA5jlRhDcx7J93tsnUD8PZi/DPHovJP8O6d7DbN+8xCHMhkuImKX6Z1/ubvP8eLN989QcwOyc5pmY2pTMWj0FYWaLG9MxS85beNzeVtw+/nw6gNlZzUU4tCXJO5R7FrjnLFYQZDarzPt+903J85m15i3UOvznf9/mx98e8sMvD/UBzM5qPj2z3VYBf7E/DbNuf6w3b6FoGfz170Xlenj/lB9//Vgfioe/LxSAHxpRWfOfqCR5p7d0e69oK1oPZ6xV5hwEryjbj9GdW2PJmbdQ6PG6bBB8flPBWh/qp/r+iuRaXVU4prmsG8kvNKie9Qa8Qo3pTmR5fyValR3QNnD3/HDmLeRlBftC1bNgdjZzUXc9VcY5o4fZ8q4/QhtslzjMCiLsKULXs31jCI/bUtdozy7HfDpm/ZyC8KvazEoiHMCsSGU9+3J3bfoNrtFvMLf5VMwSaTCqmEX/7GLMM+cYkP9jH3J3O7d6xg24ZzPSfJg8ZqP3ZHaVJCwTWzqr1ZtPwiyzB8LszJ6tJGGZ2NJZrd58XGbrpCn2BZbD7D9Qz6oxH86sc79x33QUOr3/RSdjtrtxTbk2/ZV009skYZnY0lmt3TwjbnHqY9bm1POLZ7Yd/BqV2Z21nsH9d/8024KA2YWap2LW32cuDbN1ifGYra7BXnXvVwkyWPtouebnMts2AsL9BvQLzM5sUcU6G4CA2cWbxzK7ccS7a2C2TjawNq3ZlW0DrNe1YPMoZoMXVY67b7dAZqu1ua6cjZaesT/Yos0z8iYpYj63dUovszKM6QLjtWe/fbDbs3FKEpaJLZ2VSnMGhXOY9VbX9E4ZwKy8CT1qv8GzfB1EMDuWOZMCFWY2QJCpYmXMBvp7l8psVdm6c8VllW+SsExs6axUmidldsPP5yaZzZjCxItJ8nIs8zPFMlvo/9w9mkVdtEnCMrGls9JonjE0DGG20yZIy2zGFKI1Xb5Buza9pLsrSVgmtnRWGs3TMWvaBBn3PMFs1h1x5YtnfClSYHbl5hwOvnnG3inVLEtUGfbVnA2ze3YWjNWxxv1lkZowr6vZT0GSc5AkLBNbOiuN5mmY7TZjOQqHMhssRWnKXMR6P4VdZ0oYmB3bnLu+6WHWyR/oc3MfbpllYbSYlS9fsx+R2ZLMsqtAOIYAZscxZy+CxMxu+I0N+PPzvsJuP9gSmH0ukC07CKRjtWB2HHP2kknGrDveNRqzC2gbVEvPfvnhqjtjHPspzGB+FrM9A7T8k5mkx5XvB+vRmDkyZV3b5nHF7TOeJCwTWzorheZyZp0ibg4M50M8mWWiUYJFMltVsc/tOJi/XheYHdt8ILMbemqs6Ne+POSCHtelMVsu1mXGu+67ezQ763WB2dHN2XErntkNl1EQyWwfjZEjtq1Gy/n+7l9Vc/a5TZLx1+sCs2ObZ94N1rwqEZrCxTzmPl39p5LZcu/Q10VV2+mL9dbrArOjm8cw68ziOo9ZwSjB8pg9U0nCMrGls9JnLmXWn3U4PrNxA7YdTccs9gebwTwjbrnmG8meXOxD7tNZ7S4YJFgYs02ybHvFhX0YZzDvZVaaEMs84j9/YlaA48KYbfTctl+ly3GA2WTmGXmzNe8kEqRgtqVQyOwgZMdvGzTTGLGn3fTmYWbbhNje3ELuEb9Aw6wkuoUyG7VjKJhNa54xt0vzNiGWaXpm3h0Bs3URWegxiTEdgdk1mweY5ffpJM7IhFMJYpkVlfI0JbNYY25qc5bZzSYnHuXOPlWygibqKphtl+XAGnNTm/u/7kadFbUkzJ4SAwSInYos+3MxLiyzbb8B1uua3Dwj75mGbDSzUXvFLPtzMS4us03/bNvVBWZTmYt/Uglmm/7YnChBn8+PpfFS8KHz9WxHUWvMQbwy2QaD/uaH9q6Hfgn6fOmrKZVgDiPWmDvXXNyt6fYUWBkFA+rZCCn40GXMxihJWCa2dFbLMBcPeTo9BfZ9MAtmpzMX9ZSeCtbys7jzvfvIOS/lSsGHLmE2riWbJCwTWzqrZZhHM7tphrxcczDr7mnn5HHZO4KA2YHm8h/sskw3MRbMWi4SZvNq8gLmKZxpLmY2C65OIEoguChmq0qVzOO6R//seeZiZoOrE2SSGVtzp16Nau4zS+d434u3v00SloktndUizGXMkpO9uxngOZvPZZ9xUcxSwAobBmCWN3cGVGn1LR+fGXMw6zG7s8YQMLcmibmAWX4b5M7J0syry2K2WW92iJKEZWJLZzWmOcHGMGb5CV4DmJ03XXBUc4rZdl3v+gGsMRcQ1bYMMsvQ1BAbmi6TceaBl4uTgg9dwizWmAuIvIinzDPiVqvT4AF7ddVewI36sWj40Clm3bYB1pjjRfeDxjLbEBt+ITBrXChmiWswrDFHiunfj2M2uNCWfRKY3Uv7urDGHKNBzHppW9TD/CuBWQmzWGOOUWYdgube6KuRdMuDTisEzEqYjVKSsExs6axGMj+X2dCm9JQBmK1cwOxwsT2uPcyaO96ChmBW6AJmhyuCWbuIu2Is7eI9nTHmKbX4D51mNm7tzstllu8JCDJL8UqZ+M+DWeNCMBuXXwBmo5jtTyngXw7MGheC2bi1Oy+WWa7zijJvJ8vQJ9APuQXArHEhmHXX7myW6dhIVj9KEpaJLZ1VlLlwpD6aWW6yjGzmQeSKWkOllFlPp7Fc0ZJdScIysaWzijEXrlPpdwQEzL2LLrvrSzYTBszWLgJm25wZyfBtkrBMbOmsIsyDM1danomakjPv6STI+l7UOQfMkszaa3eC2c6Tp8wrEbOZZJsO0zKQpw6CWYpZd+3OJs9LcnGWJCwTWzoruXn4Z7rhyy1i38/3pyuAU3naqXMDzMpdCGb9dRCr9bqu8p0k5SBJWCa2dFZi8/DlUDOI4JXoPtC2BbJm12PeKhwmITArYjZGScIysaWzkpr3VHo9FfD+xGveeZA5B8wOdyGYPW/tziRhmdjSWQnN+0CqH9/wssz7kwsHIAtmSWbdtTsvZj5YH7MWmPSpXXMwO4o5zawt6U4K6pnlB2P3htf+iQSWOZgdxVzC7KWsb8APbDU9AAHDWGaFAwm+wCzJbN1PUOtS9mimme00BgT1Zte8P7kQzA5yoZh11+SI6kFIEpaJLZ2VyJxg1m689teblrk0UStSYJZg1l3f4EL2u6VmEgRKhM4Hs2OaS5iNU5KwTGzprCTmLrOxMwnA7ETmFLOG1uCV1+Hddnub58eb7Zun5rAmZglikzM7DFkw6zHbJsuatkA1KOa2DY6/fswPf/r4cnebP/6c14cVMct0awkuqqpjJkuIBbMDXah6tlefS0I/3R5/e8gPvzzUh5Uwy/dr9f/WV/8Xh3xon4BEYHYQs3Vde3j/1DkUj31fKNpoZGWlJOWKf5vOfof+OX0unc0PM0Fx6ExZzHbHat22wkkvd9f55zcVrPWhfiLJn5L5e0riwvxOk1MJ/BPrm0biV8plSdzDhHqWYFYyVnu8uS6uxNx6doHMckOkufV8cCqBOB+7aRGA2THNKWYFY7WHd7cluAras1x2YTO8epqqxbdfxfA1oOZREw8iBWbJerbDLNk2MMhW7YOq3+B6sf0G7nQAx7yT+MIyK4cPzE5iTjHbP5rwuC11q6B/NsDsiVc+wSo29aoZJMijTosUmKWYjcqXdZUkLBPb+RZcqpbVHmB7U4XdrJ0TOsyOJjBLMFsuN2vLXvdbObOd6S+nX3+uUyC2m/VUVsEXP4v7hNdgUXsvJQnLxHa2g5f2Yk9/kQyuRv3Eg9kpzOl61mY2LmcmSVgmtkFnWd2qzU1vVkwuwnGJaSxglmA2//LvFp3KmM3cG2RnVi6iceDVv4Ivfhb3MdsGTt+WprZBUzP6gwUWf7mMRjC7PHOynvW0qGuw8DBq1l7uu4Nb3ZPG6z4tpeCLn8V97hyZ+Zht/uOeJXi1z8kyDd/NHOYaQqeYddsGy5rDGB6dsjsH6FOro4LvZg5zDaFTzNbk/sdpca5lzRUPM2t4DQB9Oij4buYw1xA6z2xnf9uoteqThGViox5kB2MD9atzMpidy318Zhc57zYjbpXikrP8k5s0lvGk11xD6AFm74ftBJIkLBMb8RiZQNBWsJK0bDA7m/vo12DC/W1nY7btgSWfJdUOxir4buYw1xA6xaylr3/8nbkzB7NEAkH3gf5O1wzMzug+Vf9sUevW3QY7UdU7IAhmkCDMrLespmiYoCmk4LuZw1xD6B6z1LyEe3N/rLFbbpAgxKx/xSUc2AKzM7qPXc/eSwdr0zArmRrbWYLAOyV2LFbBdzOHuYbQOWa/vh14CRYfFjtIkO/dZ9xBWa7jSyAF380c5hpCZ5h93gze8jY2An6QID89Xj3jZcAGz+2Vgu9mDnMNodPM3ot2tk3MbGBqbLrp3I75SNJrriF0itlvHzYxCQbnMRtok+adqdzMdVo4+SAkBd/NHOYaQieY/fLDsAm3cmYzpm7lp8ZyU7PArCr3sZjdndEukDGb7aldYzeO9tbUWG46YfR07uaNDzjnAsw1hO4xy60pl5bZfUNbh1F/ypaTp815gVkl7mrnKXTmGHqw2VO2JD2wGftMWAq+mznMNYQ+PbNkZhb5iGhqLNNm6JWC72YOcw2hz8psz7PC6dxgVo27TmZlCw/v2xXee3VxSxCA2UmZFSUL1v/3r6ttnRErBd/NHOYaQp+UWVm92fyn4ONbnbmG0CdlViRMf5nTXEPoy2MWUwnmNNcQOpiF+XTuq2UWUwlmNNcQenpmIWgaLamebf6e0lnBfBHuS61nk4RlYktnBfNFuINZmGtzB7Mw1+YOZmGuzR3MwlybO5iFuTZ3MAtzbe5LZVaJvp87gMHSG3ni0MGsGumNHMyeJ73fvN7Iwex50vvN640czEIXLjALaROYhbQJzELaBGYhbboMZg+/PBT/vdv+VBwet9vyWNzb3s4dV7+IyF/utj9+nDsugbqh1zEfb7Zvns42vghmP5ef2/HmNn8sPrFPFanHXz/mhz8t/qsnIi8PnxN882PLDb2I+eWuuPfz2c6XwOynH/+3+JM/vH8qSX35awXq5/Kj+7T0ipaK/Pjbw9xhSWSFXsdcHqra9zxdArPmZ+r08d1sT42Csq5duvzID+//pqdtUIdex1zfO9f4cpitfqZ+/Fg2CEyN9XJ3PXdc/fIjP7y7rb78xasbuom5bNKAWaFOlwP/ZX5eq0bB8UYBskTkiSqr8dUJvaluwaxYp0bUqS1YMFv+6SuQH/nxz5qYzavQ65jRno1Q9TNVfM/FRWv5+/TyPw9KkCUir/7g1LQNTOh1zGVrDP0GQlV/3J+3Vefg47a8HCj7OjV00PqRl52cP2noOuiGXseM/lnoMgVmIW0Cs5A2gVlIm8AspE1gFtImMAtpE5iFtAnMQtoEZiFtArOQNoFZSJvALKRNYBbSJjALaROYhbQJzELaBGYhbQKzkDaBWUibwCykTWAW0iYwC2kTmIW0CcxC2gRmIW36f0RU84GPLGP4AAAAAElFTkSuQmCC" alt /><!-- --></p>
<p>It’s not very likely you’ll want anything but a line for a graphic like this, but in case you do, you can over-write the default geom. And of course all the usual <code>ggplot2</code> polishing facilities are available:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) +<span class="st"> </span>
<span class="st">   </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey75&quot;</span>) +
<span class="st">   </span><span class="kw">stat_rollapplyr</span>(<span class="dt">width =</span> <span class="dv">12</span>, <span class="dt">align =</span> <span class="st">&quot;center&quot;</span>, <span class="dt">geom =</span> <span class="st">&quot;point&quot;</span>, 
                   <span class="dt">size =</span> <span class="fl">0.5</span>, <span class="dt">colour =</span> <span class="st">&quot;steelblue&quot;</span>) +
<span class="st">   </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&quot;&quot;</span>, <span class="dt">y =</span> <span class="st">&quot;Number of US Air Passengers</span><span class="ch">\n</span><span class="st">(rolling average and original)&quot;</span>)</code></pre></div>
<pre><code>Warning: Removed 11 rows containing missing values (geom_point).</code></pre>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
</div>
<div id="seasonal-adjustment" class="section level3">
<h3>Seasonal adjustment</h3>
<p>Three stats will do seasonal adjustment for you, but I recommend only two of them: <code>stat_stl()</code> and <code>stat_seas()</code>. In fact, if <code>stat_seas works</code> it will generally be better. Amongst other things it does automatic detection of outliers and level shifts, best transformation to make, and adjustments for Easter and number of trading days. It’s driven by Christopher Sax’s <a href="https://CRAN.R-project.org/package=seasonal"><code>seasonal</code> R package</a>, which is the best interface on the planet to the <a href="https://www.census.gov/srd/www/x13as/"><code>X13-SEATS-ARIMA</code> time series analysis application from the US Census Department</a>, which is the industry standard particularly for official statistics agencies doing seasonal adjustment.</p>
<p>X13 (via <code>stat_seas</code>) has limitations, such as a maximum number of observations, and only working with socio-economic style data (eg things measured in months, quarters and year rather than in milliseconds or eons). For these cases, <code>stat_stl()</code> provides a robust workhorse, a wrapper around <code>stl()</code> that ships with R in the <code>stats</code> package and implements the Clevelands’ seasonal-trend decomposition procedure based on a loess scatterplot smoother.</p>
<p>Here they both are in action:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y)) +
<span class="st">   </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey50&quot;</span>) +
<span class="st">   </span><span class="kw">stat_seas</span>(<span class="dt">colour =</span> <span class="st">&quot;blue&quot;</span>) +
<span class="st">   </span><span class="kw">stat_stl</span>(<span class="dt">s.window =</span> <span class="dv">7</span>, <span class="dt">colour =</span> <span class="st">&quot;red&quot;</span>)</code></pre></div>
<pre><code>Calculating starting date of 1949 from the data.</code></pre>
<pre><code>Calculating frequency of 12 from the data.</code></pre>
<pre><code>Calculating frequency of 12 from the data.</code></pre>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
<p>Check out the helpfiles for more options. For example, you can convert the data to an index first, or pass more advanced arguments to the underlying time series programs.</p>
</div>
<div id="leverage-ggplot2-and-seasonal-adjustment" class="section level3">
<h3>Leverage <code>ggplot2</code> and seasonal adjustment</h3>
<p>One of the more interesting implications of bringing seasonal adjustment into the <code>ggplot2</code> universe is the ability to slice and dice the data by aesthetic mappings (usually to colour) by faceting. This all works seamlessly in a way that will be familiar to <code>ggplot2</code> users eg</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(ldeaths_df, <span class="kw">aes</span>(<span class="dt">x =</span> YearMon, <span class="dt">y =</span> deaths, <span class="dt">colour =</span> sex)) +
<span class="st">  </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_wrap</span>(~sex) +
<span class="st">  </span><span class="kw">stat_seas</span>() +
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;Seasonally adjusted lung deaths in the UK&quot;</span>)</code></pre></div>
<pre><code>Calculating starting date of 1974 from the data.</code></pre>
<pre><code>Calculating frequency of 12 from the data.</code></pre>
<pre><code>Calculating starting date of 1974 from the data.</code></pre>
<pre><code>Calculating frequency of 12 from the data.</code></pre>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
</div>
</div>
<div id="ggsdc-for-quick-decomposition-into-trend-seasonal-and-random-components" class="section level2">
<h2><code>ggsdc</code> for quick decomposition into trend, seasonal and random components</h2>
<p>The final key functionality from the <code>ggseas</code> package is the ability to do decomposition into trend, seasonal and random components, within the <code>ggplot</code> paradigm for polishing, aesthetic mappings, etc. Unlike the <code>stat_seas()</code> and its cousins which are stats that fit into the usual <code>ggplot() + ... +...</code> pipeline, <code>ggsdc()</code> is a replacement for the <code>ggplot()</code> function that normally starts that pipeline. <code>ggsdc()</code> has to seize control of the faceting operations in the pipeline and a few other things so it can’t be added just as a geom (at least not to this author’s understanding).</p>
<p><code>ggsdc()</code> provides access to classic decomposition (additive or multiplicative) from <code>decompose()</code>, loess-based via <code>stl()</code>, or X13-SEATS-ARIMA via <code>seasonal()</code>. Again, I recommend one of the latter two as the more powerful and flexible approaches to seasonality, much better at handling slowly changing seasonality over time.</p>
<p>Here’s how it works at its simplest:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggsdc</span>(ap_df, <span class="kw">aes</span>(<span class="dt">x =</span> x, <span class="dt">y =</span> y), <span class="dt">method =</span> <span class="st">&quot;seas&quot;</span>) +<span class="st"> </span><span class="kw">geom_line</span>()</code></pre></div>
<pre><code>Calculating starting date of 1949 from the data.</code></pre>
<pre><code>Calculating frequency of 12 from the data.</code></pre>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
<p>Note that you still need to add a geom (usually <code>geom_line()</code>) to tell ggplot2 how to render the chart</p>
<p>Here’s a slightly more complex version with a multivariate series:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">serv &lt;-<span class="st"> </span><span class="kw">subset</span>(nzbop, Account ==<span class="st"> &quot;Current account&quot;</span> &amp;<span class="st"> </span>
<span class="st">                  </span>Category %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Services; Exports total&quot;</span>, <span class="st">&quot;Services; Imports total&quot;</span>))
<span class="kw">ggsdc</span>(serv, <span class="kw">aes</span>(<span class="dt">x =</span> TimePeriod, <span class="dt">y =</span> Value, <span class="dt">colour =</span> Category),
         <span class="dt">method =</span> <span class="st">&quot;stl&quot;</span>, <span class="dt">s.window =</span> <span class="dv">7</span>, <span class="dt">frequency =</span> <span class="dv">4</span>,
         <span class="dt">facet.titles =</span> <span class="kw">c</span>(<span class="st">&quot;The original series&quot;</span>, <span class="st">&quot;The underlying trend&quot;</span>, 
                          <span class="st">&quot;Regular seasonal patterns&quot;</span>, <span class="st">&quot;All the randomness left&quot;</span>)) +
<span class="st">      </span><span class="kw">geom_line</span>()</code></pre></div>
<p><img src="data:image/png;base64,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" alt /><!-- --></p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
